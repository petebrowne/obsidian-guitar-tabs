import { mapKeys, sortBy } from "es-toolkit/compat";
import { getSemitones } from "./interval";

// From: https://plucknplay.github.io/en/chord-list.html
export const chordMap = mapKeys(
  {
    "1-3-5": "",
    "1-2-5": "sus2",
    "1-4-5": "sus4",
    "1-3-b5": "(b5)",
    "1-3-5-6": "6",
    "1-3-5-7": "maj7",
    "1-3-b5-7": "maj7(b5)",
    "1-3-#5-7": "maj7(#5)",
    "1-3-5-9": "add9",
    "1-3-5-11": "add11",
    "1-3-5-6-9": "6/9",
    "1-3-5-7-b9": "maj7(b9)",
    "1-3-5-7-#9": "maj7(#9)",
    "1-3-5-7-#11": "maj7/#11",
    "1-3-5-7-13": "maj7/13",
    "1-3-5-7-9": "maj9",
    "1-b3-5-6-9-#11": "6/9/#11",
    "1-3-5-7-#9-11": "maj7(#9)11",
    "1-3-5-7-9-13": "maj9/13",
    "1-3-5-7-9-11": "maj11",
    "1-b3-5": "m",
    "1-b3-5-6": "m6",
    "1-b3-5-b7": "m7",
    "1-b3-5-7": "m(maj7)",
    "1-b3-5-9": "m(add9)",
    "1-b3-5-11": "m(add11)",
    "1-b3-5-6-9": "m6/9",
    "1-b3-5-b7-11": "m7/11",
    "1-b3-b5-b7-11": "m7/11(b5)",
    "1-b3-5-b7-b13": "m7/b13",
    "1-b3-5-b7-13": "m7/13",
    "1-b3-5-7-9": "m(maj9)",
    "1-b3-5-b7-9": "m9",
    "1-b3-5-6-9-11": "m6/9/11",
    "1-b3-5-b7-9-11": "m11",
    "1-b3-5-b7-9-11-13": "m13",
    "1-3-5-b7": "7",
    "1-4-5-b7": "7sus4",
    "1-3-b5-b7": "7(b5)",
    "1-3-#5-b7": "7(#5)",
    "1-3-5-b7-b9": "7(b9)",
    "1-4-5-b7-b9": "7(b9)4",
    "1-3-5-b7-#9": "7(#9)",
    "1-3-5-b7-11": "7/11",
    "1-3-5-b7-#11": "7/#11",
    "1-3-5-b7-b13": "7/b13",
    "1-3-5-b7-13": "7/13",
    "1-3-5-b7-9": "9",
    "1-4-5-b7-9": "9/4",
    "1-3-b5-b7-9": "9(b5)",
    "1-3-#5-b7-9": "9(#5)",
    "1-3-5-b7-b9-#11": "7(b9)#11",
    "1-3-5-b7-b9-b13": "7(b9)b13",
    "1-3-5-b7-b9-13": "7(b9)13",
    "1-3-5-b7-#9-#11": "7(#9)#11",
    "1-3-5-b7-#9-b13": "7(#9)b13",
    "1-3-5-b7-9-#11": "9/#11",
    "1-3-5-b7-9-b13": "9/b13",
    "1-3-5-b7-9-13": "9/13",
    "1-4-5-b7-9-13": "13/4",
    "1-3-5-b7-9-11": "11",
    "1-3-5-b7-b9-11": "11(b9)",
    "1-3-5-b7-#9-11": "11(#9)",
    "1-3-5-b7-9-#11-13": "9/#11/13",
    "1-3-5-b7-9-11-13": "13",
    "1-3-5-b7-b9-11-13": "13(b9)",
    "1-3-5-b7-#9-11-13": "13(#9)",
    "1-b3-b5": "°",
    "1-b3-b5-bb7": "°7",
    "1-b3-b5-bb7-b13": "°7/b13",
    "1-b3-b5-b7": "m7(b5)",
    "1-3-#5": "Augmented +",
  },
  (_, key) =>
    // we normalize to sorted semitone intervals, i.e.
    // "1-3-5-9" -> "0-2-4-7"
    sortBy(
      key.split("-").map((v) => getSemitones(v) % 12),
      (semitone) => semitone,
    ).join("-"),
);
